# =========================================
# --- ENGINE / WHBOT CONFIGURATION ---
# =========================================

WH_DB_PATH=data/session.db
WH_MSG_DB_PATH=data/messages.db
WH_ENABLE_STATUS=1
WH_BACKUP_EVERY=30m
WH_MAX_CONN_ATTEMPTS=5
WH_RECONNECT_BASE_DELAY=2s
WH_HTTP_PORT=8080

# --- Forwarding (folder + webhook) ---
# folder = escribe JSONs en outbox y, si webhook está habilitado, hace ambos
WH_FORWARD_MODE=folder
WH_OUTBOX=outbox
WH_CONTEXT_DEPTH=3
WH_FORWARD_EXTRA_JSON={"tenant":"acme","lang":"es"}

# --- Webhook integration (engine -> whserver) ---
WH_WEBHOOK_ENABLED=1
WH_WEBHOOK_URL=http://127.0.0.1:9000/wh
WH_WEBHOOK_SECRET=supersecret_local_dev
WH_WEBHOOK_HEADERS_JSON={"X-Env":"dev","X-Team":"ops"}

# =========================================
# --- WHSERVER CONFIGURATION ---
# =========================================

WH_SERVER_ADDR=:9000

# Seguridad de webhook
WH_REQUIRE_SIG=1
WH_USE_TIMESTAMP=0
WH_ALLOW_NO_SECRET_DEV=1
WH_TS_SKEW=2m
WH_BODY_LIMIT=2097152
WH_DEDUPE_WINDOW=10m
WH_LOG_JSON=0

# (El WH_WEBHOOK_SECRET de arriba es el mismo que usa el server)

# =========================================
# --- ENGINE ENDPOINTS (para contestar) ---
# =========================================

# Puedes definir una base y derivar defaults en config.go
WH_ENGINE_BASE_URL=http://127.0.0.1:8080

# Rutas explícitas (si las pones, tienen prioridad)
WH_ENGINE_SEND_URL=http://127.0.0.1:8080/api/send
WH_ENGINE_TYPING_URL=http://127.0.0.1:8080/api/typing
WH_ENGINE_MARKREAD_URL=http://127.0.0.1:8080/api/markread 

# --- Typing behavior ---
WH_TYPING_ENABLED=1
WH_TYPING_DEBOUNCE=2000ms
WH_TYPING_PAUSE_AFTER=0s
WH_TYPING_MEDIA=text

# --- Reply wait tuning ---
WH_REPLY_BASE_WAIT=140ms
WH_REPLY_PER_CHAR_MS=25
WH_REPLY_JITTER_MS=400
WH_REPLY_MAX_WAIT=4s
WH_PRE_REPLY_DELAY=900ms
WH_AGGREGATOR_WINDOW=5s